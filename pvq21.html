<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PVQ21 åƒ¹å€¼è§€å•å·ï¼ˆå®˜æ–¹åŸç‰ˆï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .instructions {
            background: #f8fafc;
            padding: 25px;
            border-left: 4px solid #4f46e5;
            margin: 20px;
            border-radius: 8px;
        }

        .instructions h3 {
            color: #1e293b;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .scale-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-top: 15px;
        }

        .scale-item {
            background: white;
            padding: 8px 10px;
            border-radius: 6px;
            text-align: center;
            font-size: 0.85rem;
            border: 1px solid #e2e8f0;
        }

        .form-content {
            padding: 30px;
        }

        .question {
            background: #fefefe;
            border: 2px solid #f1f5f9;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .question:hover {
            border-color: #4f46e5;
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.1);
        }

        .question-number {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #334155;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .rating-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .rating-option {
            position: relative;
            flex: 1;
            max-width: 80px;
        }

        .rating-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .rating-option label {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 45px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            background: white;
            font-weight: bold;
            color: #64748b;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            font-size: 0.9rem;
        }

        .rating-option input[type="radio"]:checked + label {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            border-color: #4f46e5;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);
        }

        .rating-option label:hover {
            border-color: #4f46e5;
            transform: scale(1.02);
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.85rem;
            color: #64748b;
        }

        .submit-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            min-width: 200px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }

        .submit-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results {
            background: #f8fafc;
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            border: 2px solid #4f46e5;
        }

        .results h2 {
            color: #1e293b;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8rem;
        }

        .value-result {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 15px 20px;
            margin-bottom: 12px;
            border-radius: 8px;
            border-left: 4px solid #4f46e5;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .value-name {
            font-weight: 600;
            color: #1e293b;
            font-size: 1.1rem;
        }

        .value-score {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
        }

        .rank {
            background: #fbbf24;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            margin-right: 15px;
        }

        .progress {
            margin: 20px 0;
            text-align: center;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .form-content, .header {
                padding: 20px;
            }
            
            .rating-scale {
                display: grid;
                grid-template-columns: repeat(6, 1fr);
                gap: 8px;
            }
            
            .rating-option {
                max-width: none;
            }
            
            .rating-option label {
                height: 40px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>PVQ21 åƒ¹å€¼è§€å•å·</h1>
            <p>åŸºæ–¼æ–½ç“¦èŒ¨åŸºæœ¬äººé¡åƒ¹å€¼è§€ç†è«–ï¼ˆå®˜æ–¹åŸç‰ˆï¼‰</p>
        </div>

        <div class="instructions">
            <h3>ğŸ“‹ å¡«ç­”èªªæ˜</h3>
            <p>ä»¥ä¸‹æè¿°äº†21ä½ä¸åŒçš„äººã€‚è«‹ä»”ç´°é–±è®€æ¯å€‹æè¿°ï¼Œç„¶å¾Œè©•ä¼°é€™å€‹äººèˆ‡æ‚¨çš„ç›¸ä¼¼ç¨‹åº¦ã€‚è«‹ä½¿ç”¨1-6çš„è©•åˆ†æ¨™æº–ï¼š</p>
            
            <div class="scale-info">
                <div class="scale-item">1: å®Œå…¨ä¸åƒæˆ‘</div>
                <div class="scale-item">2: ä¸åƒæˆ‘</div>
                <div class="scale-item">3: æœ‰é»ä¸åƒæˆ‘</div>
                <div class="scale-item">4: æœ‰é»åƒæˆ‘</div>
                <div class="scale-item">5: åƒæˆ‘</div>
                <div class="scale-item">6: éå¸¸åƒæˆ‘</div>
            </div>
        </div>

        <form id="pvq21Form" class="form-content">
            <div class="progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span id="progressText">é€²åº¦: 0/21</span>
            </div>

            <div id="questions"></div>

            <button type="submit" class="submit-btn" id="submitBtn" disabled>
                ğŸš€ è¨ˆç®—æˆ‘çš„åƒ¹å€¼è§€æ’åº
            </button>
        </form>

        <div id="results" class="results" style="display: none;">
            <h2>ğŸ† æ‚¨çš„åƒ¹å€¼è§€æ’åºçµæœ</h2>
            <div id="valueResults"></div>
        </div>
    </div>

    <script>
        // å®Œå…¨æŒ‰ç…§æ‚¨æä¾›çš„21é“é¡Œç›®åŸæ–‡ï¼ˆè½‰ç‚ºç¹é«”å­—ï¼‰
        const questions = [
            "æƒ³å‡ºæ–°é»å­ï¼Œç™¼æ®å‰µæ„å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–å–œæ­¡ä»¥èˆ‡çœ¾ä¸åŒçš„æ–¹å¼åšäº‹ã€‚",
            "å¯Œè£•å°ä»–ä¾†èªªå¾ˆé‡è¦ï¼Œä»–å¸Œæœ›è‡ªå·±æœ‰å¾ˆå¤šå¾ˆå¤šçš„éŒ¢ä¸¦æ“æœ‰è¨±å¤šæ˜‚è²´çš„æ±è¥¿ã€‚",
            "ä»–èªç‚ºæ™®å¤©ä¸‹äººäººå¹³ç­‰å¾ˆé‡è¦ã€‚ä»–ç›¸ä¿¡ç”Ÿæ´»ä¸­æ¯å€‹äººéƒ½æ‡‰ç•¶äº«æœ‰å¹³ç­‰çš„æ©Ÿæœƒã€‚",
            "å°ä»–ä¾†èªªï¼Œç™¼æ®è‡ªå·±çš„æ‰èƒ½å¾ˆé‡è¦ã€‚ä»–å¸Œæœ›ä»¥æ­¤å¾—åˆ°äººå€‘çš„æ¬£è³ã€‚",
            "å®‰å…¨çš„ç”Ÿæ´»ç’°å¢ƒå°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–é¿å…ä»»ä½•æœƒå±åŠè‡ªèº«å®‰å…¨çš„äº‹æƒ…ã€‚",
            "ä»–å–œæ­¡é©šå–œï¼Œç¸½æ˜¯å°‹æ±‚æ–°é®®äº‹ç‰©ã€‚ä»–èªç‚ºè±å¯Œå¤šå½©çš„äººç”Ÿç¶“æ­·å¾ˆé‡è¦ã€‚",
            "ä»–èªç‚ºäººå€‘æ‡‰è©²æ‡‚å¾—æœå¾å‘½ä»¤ã€‚åœ¨ä»–çœ‹ä¾†ï¼Œä»»ä½•æƒ…æ³ä¸‹å¤§å®¶éƒ½è¦éµå®ˆè¦å‰‡ï¼Œå³ä½¿èº«é‚Šæ²’äººæ³¨æ„ã€‚",
            "è†è½ä¸åŒçš„æ„è¦‹å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚å³ä½¿ä»–å’Œåˆ¥äººæ„è¦‹ä¸åˆï¼Œä»–ä»ç„¶å¸Œæœ›èƒ½å¤ ç†è§£åˆ¥äººã€‚",
            "æ­æ•¬å’Œè¬™è™›å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–ç›¡é‡é¿å…å¼•èµ·åˆ¥äººçš„æ³¨æ„ã€‚",
            "äº«å—ç”Ÿæ´»çš„æ¨‚è¶£å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–å–œæ­¡è®“è‡ªå·±ç›¡æƒ…äº«æ¨‚ã€‚",
            "è‡ªå·±çš„äº‹è‡ªå·±åšä¸»å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–å–œæ­¡è‡ªç”±åœ°ç±ŒåŠƒå’Œå®‰æ’ï¼Œä¸ä¾é ä»–äººã€‚",
            "å¹«åŠ©èº«é‚Šçš„äººå°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–å¸Œæœ›é—œå¿ƒä»–å€‘ï¼Œä½¿ä»–å€‘ç”Ÿæ´»å¹¸ç¦ã€‚",
            "æˆåŠŸå°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–å¸Œæœ›åˆ¥äººèªå¯ä»–çš„æˆå°±ã€‚",
            "åœ‹å®¶èƒ½çµ¦ä»–å®Œå…¨å®‰å…¨ä¿éšœå°ä»–ä¾†èªªéå¸¸é‡è¦ã€‚ä»–å¸Œæœ›ä¸€å€‹èƒ½ä¿è­·äººæ°‘çš„å¼·å£¯åœ‹å®¶ã€‚",
            "ä»–ç¸½æ˜¯å°‹æ‰¾åƒèˆ‡å†’éšªçš„æ©Ÿæœƒã€‚å¸Œæœ›åˆºæ¿€æœ‰è¶£çš„ç”Ÿæ´»ã€‚",
            "èˆ‰æ­¢å¾—é«”å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–ä¸å¸Œæœ›åšå‡ºä»»ä½•æœƒå¼•èµ·åˆ¥äººéè­°çš„äº‹æƒ…ã€‚",
            "åˆ¥äººå°ä»–çš„å°Šé‡å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–å¸Œæœ›åˆ¥äººæŒ‰ä»–çš„ä¸»æ„è¾¦äº‹ã€‚",
            "ä¿æŒå°æœ‹å‹å¿ å¿ƒè€¿è€¿å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚ä»–å¸Œæœ›ç‚ºè¦ªå‹ä»˜å‡ºä¸€åˆ‡ã€‚",
            "ä»–å …ä¿¡äººå€‘æ‡‰è©²é—œæ„›å¤§è‡ªç„¶ã€‚æ„›è­·ç”Ÿæ…‹ç’°å¢ƒå°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚",
            "å‚³çµ±å°ä»–å¾ˆé‡è¦ã€‚ä»–å˜—è©¦æŒ‰ç…§å®—æ•™æˆ–å®¶åº­å‚³çµ±é¢¨ä¿—ç¿’æ…£ç‚ºäººè™•ä¸–ã€‚",
            "ä»–æŠŠæ¡æ¯ä¸€å€‹é–‹å¿ƒçš„æ©Ÿæœƒã€‚åšèƒ½çµ¦è‡ªå·±å¸¶ä¾†æ¨‚è¶£çš„äº‹å°ä»–ä¾†èªªå¾ˆé‡è¦ã€‚"
        ];

        // æ ¹æ“šæ¨™æº–PVQ21çš„åƒ¹å€¼è§€å°æ‡‰é—œä¿‚
        const valueMapping = {
            1: 'self-direction',    // è‡ªä¸»æ€§
            2: 'power',             // æ¬ŠåŠ›
            3: 'universalism',      // æ™®ä¸–ä¸»ç¾©
            4: 'achievement',       // æˆå°±
            5: 'security',          // å®‰å…¨
            6: 'stimulation',       // åˆºæ¿€
            7: 'conformity',        // é †å¾
            8: 'universalism',      // æ™®ä¸–ä¸»ç¾©
            9: 'tradition',         // å‚³çµ±
            10: 'hedonism',         // äº«æ¨‚ä¸»ç¾©
            11: 'self-direction',   // è‡ªä¸»æ€§
            12: 'benevolence',      // ä»æ„›
            13: 'achievement',      // æˆå°±
            14: 'security',         // å®‰å…¨
            15: 'stimulation',      // åˆºæ¿€
            16: 'conformity',       // é †å¾
            17: 'power',            // æ¬ŠåŠ›
            18: 'benevolence',      // ä»æ„›
            19: 'universalism',     // æ™®ä¸–ä¸»ç¾©
            20: 'tradition',        // å‚³çµ±
            21: 'hedonism'          // äº«æ¨‚ä¸»ç¾©
        };

        // åƒ¹å€¼è§€ä¸­æ–‡åç¨±
        const valueNames = {
            'self-direction': 'è‡ªä¸»æ€§',
            'stimulation': 'åˆºæ¿€', 
            'hedonism': 'äº«æ¨‚ä¸»ç¾©',
            'achievement': 'æˆå°±',
            'power': 'æ¬ŠåŠ›',
            'security': 'å®‰å…¨',
            'conformity': 'é †å¾',
            'tradition': 'å‚³çµ±',
            'benevolence': 'ä»æ„›',
            'universalism': 'æ™®ä¸–ä¸»ç¾©'
        };

        // ç”Ÿæˆå•é¡ŒHTML
        function generateQuestions() {
            const questionsContainer = document.getElementById('questions');
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <div class="question-number">${index + 1}</div>
                    <div class="question-text">${question}</div>
                    <div class="rating-scale">
                        ${[1,2,3,4,5,6].map(value => `
                            <div class="rating-option">
                                <input type="radio" id="q${index + 1}_${value}" name="q${index + 1}" value="${value}" required>
                                <label for="q${index + 1}_${value}">${value}</label>
                            </div>
                        `).join('')}
                    </div>
                    <div class="scale-labels">
                        <span>å®Œå…¨ä¸åƒæˆ‘</span>
                        <span>éå¸¸åƒæˆ‘</span>
                    </div>
                `;
                questionsContainer.appendChild(questionDiv);
            });
        }

        // æ›´æ–°é€²åº¦
        function updateProgress() {
            const totalQuestions = 21;
            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            const progress = (answeredQuestions / totalQuestions) * 100;
            
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `é€²åº¦: ${answeredQuestions}/${totalQuestions}`;
            
            const submitBtn = document.getElementById('submitBtn');
            if (answeredQuestions === totalQuestions) {
                submitBtn.disabled = false;
                submitBtn.textContent = 'ğŸš€ è¨ˆç®—æˆ‘çš„åƒ¹å€¼è§€æ’åº';
                submitBtn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
            } else {
                submitBtn.disabled = true;
                submitBtn.textContent = `é‚„éœ€å¡«ç­” ${totalQuestions - answeredQuestions} é¡Œ`;
                submitBtn.style.background = '#9ca3af';
            }
        }

        // è¨ˆç®—çµæœï¼ˆæŒ‰ç…§æ–½ç“¦èŒ¨æ¨™æº–PVQ21è¨ˆç®—æ–¹æ³•ï¼‰
        function calculateResults(formData) {
            const valueScores = {};
            const valueCounts = {};
            
            // åˆå§‹åŒ–
            Object.values(valueNames).forEach(name => {
                valueScores[name] = 0;
                valueCounts[name] = 0;
            });

            // è¨ˆç®—æ¯å€‹åƒ¹å€¼è§€çš„ç¸½åˆ†å’Œé¡Œç›®æ•¸
            for (let i = 1; i <= 21; i++) {
                const score = parseInt(formData.get(`q${i}`));
                const valueType = valueMapping[i];
                const valueName = valueNames[valueType];
                
                valueScores[valueName] += score;
                valueCounts[valueName]++;
            }

            // è¨ˆç®—å¹³å‡åˆ†
            const averageScores = {};
            Object.keys(valueScores).forEach(name => {
                averageScores[name] = (valueScores[name] / valueCounts[name]).toFixed(3);
            });

            // è¨ˆç®—ç¸½å¹³å‡åˆ†ï¼ˆæ‰€æœ‰21é¡Œçš„ç¸½å¹³å‡ï¼‰
            const allScores = [];
            for (let i = 1; i <= 21; i++) {
                allScores.push(parseInt(formData.get(`q${i}`)));
            }
            const totalAverage = allScores.reduce((sum, score) => sum + score, 0) / 21;

            // è¨ˆç®—ä¸­å¿ƒåŒ–åˆ†æ•¸ï¼ˆé€™æ˜¯æ¨™æº–åšæ³•ï¼‰
            const centeredScores = {};
            Object.keys(averageScores).forEach(name => {
                centeredScores[name] = (parseFloat(averageScores[name]) - totalAverage).toFixed(3);
            });

            // æ’åºï¼ˆå¾é«˜åˆ°ä½ï¼‰
            const sortedValues = Object.keys(centeredScores).sort((a, b) => parseFloat(centeredScores[b]) - parseFloat(centeredScores[a]));

            return { averageScores, centeredScores, sortedValues, totalAverage };
        }

        // é¡¯ç¤ºçµæœ
        function displayResults(results) {
            const resultsDiv = document.getElementById('results');
            const valueResultsDiv = document.getElementById('valueResults');
            
            valueResultsDiv.innerHTML = `
                <div style="background: #e0f2fe; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-size: 0.9rem; color: #0f172a;">
                    <strong>èªªæ˜ï¼š</strong>åˆ†æ•¸ç‚ºä¸­å¿ƒåŒ–èª¿æ•´å¾Œçš„çµæœï¼ˆåŸå§‹å¹³å‡åˆ†æ¸›å»å€‹äººç¸½å¹³å‡åˆ† ${results.totalAverage.toFixed(3)}ï¼‰<br>
                    <strong>è§£è®€ï¼š</strong>æ­£å€¼è¡¨ç¤ºè©²åƒ¹å€¼è§€å°æ‚¨ç›¸å°é‡è¦ï¼Œè² å€¼è¡¨ç¤ºç›¸å°ä¸é‡è¦
                </div>
            `;
            
            results.sortedValues.forEach((valueName, index) => {
                const score = parseFloat(results.centeredScores[valueName]);
                const scoreColor = score >= 0 ? '#10b981' : '#ef4444';
                
                const resultDiv = document.createElement('div');
                resultDiv.className = 'value-result';
                resultDiv.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <div class="rank">${index + 1}</div>
                        <div class="value-name">${valueName}</div>
                    </div>
                    <div class="value-score" style="background: ${scoreColor};">
                        ${score >= 0 ? '+' : ''}${results.centeredScores[valueName]}
                    </div>
                `;
                valueResultsDiv.appendChild(resultDiv);
            });

            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            generateQuestions();
            
            // ç›£è½é¸é …è®ŠåŒ–
            document.addEventListener('change', function(e) {
                if (e.target.type === 'radio') {
                    updateProgress();
                }
            });

            // è¡¨å–®æäº¤
            document.getElementById('pvq21Form').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const results = calculateResults(formData);
                displayResults(results);
            });
        });
    </script>
</body>
</html>